<h1>Shopping Cart</h1>

  <% if (sessionCart) { %>
       

<% } else if (cart) { %>
  <% if(cart.total_items > 0) { %>
  <table class="table">
    <thead class="thead-light">
      <tr>
        <th scope="col">○</th>
        <th scope="col">Product</th>
        <th scope="col">Size</th>
        <th scope="col">Quantity</th>
        <th scope="col">Price</th>
        <th scope="col">Total*</th>
      </tr>
    </thead>
    <tbody>
      <% cart.items.forEach(item => { %>

        
        <tr data-item-id="<%= item.id %>">
          <th scope="row">○</th>
          <td><%= item.product.name %></td>
          <td><%= item.size %></td>
          <td>
            <form action="/checkout/count" method="post">

              <% if(item.quantity > 1) { %>

                <button type="button" onclick="updateQuantity('<%= item.id %>', 'decrement')">&larr;</button>

              <% } else { %>

                <button type="button" name="action" value="decrement" disabled>&larr;</button>

                <% } %>

              <%= item.quantity %>
              <button type="button" onclick="updateQuantity('<%= item.id %>', 'increment')">&rarr;</button>
              <input type="hidden" name="itemId" value="<%= item.id %>">
            </form>
          </td>
          <td>$<%= item.product.price %></td>
          <td>$<%= item.subtotal %></td>
          <td>
            <%- include('removeForm', { url: `/checkout/cart/${item.id}/remove`}) %>
          </td>
        </tr>


      <% }) %>
      
    </tbody>
    </table>
    
<div class="checkout-details">

  <div>
  <p>Total Items: <%= cart.total_items %></p>
  <p>Subtotal: $<%= cart.subtotal %> **</p>
  <div class="underline"></div>
  <p>Total Price: $<%= cart.total %></p>
</div>

<div class="cForm">
  <p type="button" style="margin-right: 0.5rem;" data-toggle="tooltip" data-placement="left" title='If you would like to redeem your Gift Card/promotion code on this order, please enter the code in the designated field and click "use code"'>
    <i class="bi bi-exclamation-circle text-secondary"></i>
  </p>
  <form action="">
    
  <input type="text" id="coupon" name="coupon" placeholder="Gift Card / Coupon / Promo Code" style="width: 20rem;">
  <input class="bttn bttn-info" type="submit" value="USE CODE">
</form>
</div>

</div>

<a href="/checkout/shipping" class="text-center d-flex align-items-center justify-content-center bttn bttn-pri">proceed to checkout</a><br>
<br>
<br>
<p class="text-secondary"><small>* product price before 10% VAT</small></p>
<p class="text-secondary"><small>** total cart items price before 10% VAT</small></p>
<% } else { %>
  <p>Your cart is empty.</p>
  <% } %>
<% } else { %>
  <p>Your cart is empty.</p>
<% } %>




